<?php
$customerId = $this->getCustomerId();
$quoteId = $this->getQuoteId();
// $addressData = $this->getCustomerAddress();
$addressData = $this->getCustomerAddress();
// print_r($addressData);
// print_r($addressData->getBillingCity());
?>
<div class="responsive main-box">
    <div class="first">
        <?php if (!empty($addressData)):
            echo "<pre>"; ?>
            <?php foreach ($addressData->getData() as $addValue) { ?>
                <div id="asdasdasdasd" class="address-cards"
                    data-json='{"customer":"<?php echo $addValue->getCustomerEmail(); ?>","billing_address":"<?php echo $addValue->getBillingAddress(); ?>","billing_city":"<?php echo $addValue->getBillingCity(); ?>","billing_country":"<?php echo $addValue->getBillingCountry(); ?>", "billing_phonr":"<?php echo $addValue->getBillingPhone(); ?>"}'>
                    <span>Email :
                        <?php echo $addValue->getCustomerEmail() ?>
                    </span>
                    <span>Address :
                        <?php echo $addValue->getBillingAddress() ?>
                    </span>
                    <p>City :
                        <?php echo $addValue->getBillingCity() ?>
                    </p>
                    <p>Country :
                        <?php echo $addValue->getBillingCountry() ?>
                    </p>
                    <p>Phone No:
                        <?php echo $addValue->getBillingPhone() ?>
                    </p>
                </div>

            <?php } ?>
        <?php endif; ?>
    </div>
    <div class="second">
        <form action="<?php echo Mage::getBaseUrl('sales/quote/convert'); ?>" method="POST">
            <div>
                <div class="container">
                    <div class="title">Address</div>
                    <div class="content">
                        <div class="email-box">
                            <label class="details" for="email">Email : </label>
                            <input type="email" name="address[email]" id="email">
                        </div>
                        <div class="user-details">
                            <div class="billing">
                                <input type="hidden" name="address[quote_customer_id]">
                                <input type="hidden" name="address[quote_id]" value="<?php echo $quoteId; ?>">
                                <input type="hidden" name="address[customer_id]" value="<?php echo $customerId; ?>">


                                <div class="input-box">
                                    <label class="details" for="billing_city">Billing City : </label>
                                    <input type="text" name="address[billing_city]" id="billing_city">
                                </div>

                                <div class="input-box">
                                    <label class="details" for="billing_region">Billing Region : </label>
                                    <input type="text" name="address[billing_region]" id="billing_region">
                                </div>

                                <div class="input-box">
                                    <label class="details" for="billing_country">Billing Country : </label>
                                    <input type="text" name="address[billing_country]" id="billing_country">
                                </div>

                                <div class="input-box">
                                    <label class="details" for="billing_phone">Billing Phone : </label>
                                    <input type="number" name="address[billing_phone]" id="billing_phone">
                                </div>
                                <div class="input-box">
                                    <label class="details" for="billing_address">Billing Address : </label>
                                    <textarea name="address[billing_address]" id="billing_address" cols="30"
                                        rows="5"></textarea>
                                </div>
                            </div>
                            <div class="shipping">
                                <div class="input-box">
                                    <label class="details" for="shipping_city">Shipping City</label>
                                    <input type="text" name="address[shipping_city]" id="shipping_city">
                                </div>
                                <div class="input-box">
                                    <label class="details" for="shipping_region">Shipping Region</label>
                                    <input type="text" name="address[shipping_region]" id="shipping_region">
                                </div>

                                <div class="input-box">
                                    <label class="details" for="shipping_country">Shipping Country : </label>
                                    <input type="text" name="address[shipping_country]" id="shipping_country">
                                </div>
                                <div class="input-box">
                                    <label class="details" for="shipping_phone">Shipping Phone : </label>
                                    <input type="number" name="address[shipping_phone]" id="shipping_phone">
                                </div>
                                <div class="input-box">
                                    <label class="details" for="shipping_address">Shipping Address : </label>
                                    <textarea name="address[shipping_address]" id="shipping_address" cols="30"
                                        rows="5"></textarea>
                                </div>

                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <script type="text/javascript">
                $('.address-cards').each((i, e) => {
                    console.log($(e).attr('data-json'))
                    $(e).click(() => {
                        var _data = JSON.parse($(e).attr('data-json'))
                        for (var key in _data) {
                            if (_data.hasOwnProperty(key)) {
                                $('#' + key).val(_data[key]);
                            }
                        }
                        // $('#billing_address').val(_data.billing_address);
                        // $('#billing_city').val(_data.billing_city);
                        // $('#billing_country').val(_data.billing_country);
                    });
                })
            </script>
            <div class="dis">
                <!-- <div class="payment">
                    <h2>Payment Options</h2>
                    <div class="form-group">
                        <div class="field-group">
                            <label for="payment_options" class="label-payment-options">Payment Options:</label>
                            <select id="payment_options" name="sales_quote_payment_method[payment_options]" required
                                class="select-payment-options">
                                <option value="cod">Cash on Delivery (COD)</option>
                                <option value="creditcard">Credit Card</option>
                                <option value="upi">UPI</option>
                            </select>
                        </div>
                    </div>
                </div> -->
                <div class="payment">
                    <h2>Payment Options</h2>
                    <div class="form-group">
                        <div class="field-group">
                            <label for="payment_options" class="label-payment-options">Payment Options:</label>
                            <select id="payment_options" name="sales_quote_payment_method[payment_method]" required
                                class="select-payment-options">
                                <option value="cod">Cash on Delivery (COD)</option>
                                <option value="creditcard">Credit Card</option>
                                <option value="upi">UPI</option>
                            </select>
                        </div>
                    </div>

                    <!-- Credit Card Input Fields -->
                    <div class="form-group input-creditcard" id="creditcard-fields">
                        <label for="card_number">Card Number:</label>
                        <input type="text" id="card_number" name="sales_quote_payment_method[card_number]"
                            placeholder="Enter card number" required>
                        <label for="cvv">CVV:</label>
                        <input type="text" id="cvv" name="sales_quote_payment_method[cvv]" placeholder="Enter CVV"
                            required>
                    </div>

                    <!-- UPI Input Field -->
                    <div class="form-group input-upi" id="upi-field">
                        <label for="upi_id">UPI ID:</label>
                        <input type="text" id="upi_id" name="sales_quote_payment_method[upi_id]"
                            placeholder="Enter UPI ID" required>
                    </div>


                </div>

                <script>
                    var paymentForm = document.getElementById('paymentForm');
                    var cardNumberInput = document.getElementById('card_number');
                    var cvvInput = document.getElementById('cvv');
                    var upiIdInput = document.getElementById('upi_id');
                    var paymentOptions = document.getElementById('payment_options');

                    function resetForm() {
                        cardNumberInput.value = '';
                        cvvInput.value = '';
                        upiIdInput.value = '';
                        cardNumberInput.disabled = true;
                        cvvInput.disabled = true;
                        upiIdInput.disabled = true;
                        document.getElementById('creditcard-fields').style.display = 'none';
                        document.getElementById('upi-field').style.display = 'none';
                    }

                    resetForm();

                    paymentOptions.addEventListener('change', function () {
                        resetForm();

                        var selectedOption = this.value;
                        if (selectedOption === 'creditcard') {
                            cardNumberInput.disabled = false;
                            cvvInput.disabled = false;
                            document.getElementById('creditcard-fields').style.display = 'block';
                        } else if (selectedOption === 'upi') {
                            upiIdInput.disabled = false;
                            document.getElementById('upi-field').style.display = 'block';
                        }
                    });

                    paymentForm.addEventListener('submit', function (event) {
                        var selectedOption = paymentOptions.value;
                        if ((selectedOption === 'creditcard' && (cardNumberInput.value === '' || cvvInput.value === '')) ||
                            (selectedOption === 'upi' && upiIdInput.value === '')) {
                            event.preventDefault();
                            alert('Please fill in all required fields.');
                        }
                    });
                </script>
                <div class="shipping-method">

                    <h2>Shipping Method</h2>

                    <div class="form-group">
                        <div class="field-group">
                            <label for="shipping_options" class="label-shipping-options">Shipping Options:</label>
                            <select id="shipping_options" name="sales_quote_shipping_method[shipping_method]" required
                                class="select-shipping-options">
                                <option value="expedited ">Expedited </option>
                                <option value="overnight">Overnight</option>
                                <option value="international">International</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <div class="button">
                <input type="submit" value="Place Order">
            </div>
        </form>
    </div>
</div>